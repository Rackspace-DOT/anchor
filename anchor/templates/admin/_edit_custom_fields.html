<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4>Edit Custom Field</h4>
</div>
<div class="modal-body">
    <form method="POST" action="/admin/forms/fields/{{ form_id }}/{{ field_name }}" class="form-horizontal" id="fields_edit_form">
        {{ form.hidden_tag() }}
        {% for field in form if (field.widget.input_type != 'hidden' and field.widget.input_type != 'submit') %}
            {% if field.name == 'field_choices' %}
                <div class="form-group{% if field.errors %} has-error has-feedback{% endif %}" id="edit_{{ field.name }}_top" {% if show_field_type %}style="display: visible;"{% else %}style="display:none;"{% endif %}>
            {% elif field.name == 'default_value' %}
                <div class="form-group{% if field.errors %} has-error has-feedback{% endif %}" id="edit_{{ field.name }}_top" {% if show_default_field %}style="display: visible;"{% else %}style="display:none;"{% endif %}>
            {% else %}
                <div class="form-group{% if field.errors %} has-error has-feedback{% endif %}" id="edit_{{ field.name }}_top">
            {% endif %}
                {{ field.label(class="col-sm-3 control-label") }}
                <div class="col-xs-7">
                    {% if field.type == 'TextField' or field.type == 'TextAreaField'  %}
                        {{ field(class="form-control", **{'type': 'text'})|safe }}
                    {% elif field.type == 'BooleanField' %}
                        {{ field(type="checkbox") }}
                    {% elif field.type == 'SelectField' %}
                        {{ field(class="form-control") }}
                    {% else %}
                        {{ field }}
                    {% endif %}
                    {% if field.name == "field_choices" %}
                        <p style="font-size: 12px;" class="text-info"><strong>Note:</strong> Coma seperated list or one option per line<br />If no choices are given you will have to dynamically<br />insert them when called</p>
                    {% endif %}
                    <span class="form-control-feedback edit_{{ field.name }}" style="display: none; color: #B94A48; float: right; margin: -28px 0 0 0;">Field Required</span>
                </div>
            </div>
        {% endfor %}
    </form>
<div class="modal-footer">
    <button class="btn btn-primary" id="edit_field_submit" name="submit" type="submit" form="fields_edit_form">Submit</button>
    <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancel</button>
</div>

<script>
    $('#edit_field_submit').on('click', function() {
        $("#fields_edit_form").unbind('submit').bind('submit', function(e){
            var label = validate_field('fields_edit_form #label', 'edit_label_top', 'edit_label')
            var name = validate_field('fields_edit_form #name', 'edit_name_top', 'edit_name')
            var field_type = validate_field('fields_edit_form #field_type', 'edit_field_type_top', 'edit_field_type')
            if ( label & name & field_type ) {
                return true;
            }
            else {
                return false;
            }
        });
    });
</script>
