<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4>Edit Menu Item</h4>
</div>
<div class="modal-body">
    <form method="POST" action="/admin/settings/menu/{{ name }}" class="form-horizontal" id="edit_menu_item_form">
        {{ menu_form.hidden_tag() }}
            {% for field in menu_form if (field.widget.input_type != 'hidden' and field.widget.input_type != 'submit' ) %}
            <div class="form-group{% if field.errors %} has-error has-feedback{% endif %}" id="edit_{{ field.name }}_top">
                {{ field.label(class="col-sm-3 control-label") }}
                <div class="col-xs-7">
                    {% if field.type == 'TextField' or field.type == 'TextAreaField'  %}
                        {{ field(class="form-control", **{'type': 'text'})|safe }}
                    {% elif field.type == 'BooleanField' %}
                        {{ field(type="checkbox") }}
                    {% elif field.type == 'SelectField' %}
                        {{ field(class="form-control") }}
                    {% else %}
                        {{ field }}
                    {% endif %}
                    <span class="form-control-feedback edit_{{ field.name }}" style="display: none; color: #B94A48; float: right; margin: -28px 0 0 0;">Field Required</span>
                </div>
            </div>
        {% endfor %}
    </form>
</div>
<div class="modal-footer">
    <input class="btn btn-primary" id="edit_menu_item_submit" name="submit" type="submit" form="edit_menu_item_form" value="Submit">
    <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Cancel</button>
</div>

<script>
    $(document).ready(function() {
        $('#edit_new_parent_top').hide();
    })

    $('#edit_menu_item_form #parent_menu').on('change', function() {
        var selectVal = $(this).val();
        if (selectVal == 'Add New Parent') {
            $('body #edit_new_parent_top').show();
        } else { $('body #edit_new_parent_top').hide(); }
    });

    $('#edit_menu_item_submit').on('click', function() {
        $("#edit_menu_item_form").unbind('submit').bind('submit', function(e){
            var url = validate_field('edit_menu_item_form #menu_item_url', 'edit_menu_item_url_top', 'edit_menu_item_url');
            var name = validate_field('edit_menu_item_form #menu_display_name', 'edit_menu_display_name_top', 'edit_menu_display_name');
            if ( url & name ) {
                return true;
            }
            else {
                return false;
            }
        });
    });
</script>
